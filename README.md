# DevPodProblem

[![CI Status](http://img.shields.io/travis/Gero Herkenrath/DevPodProblem.svg?style=flat)](https://travis-ci.org/Gero Herkenrath/DevPodProblem)
[![Version](https://img.shields.io/cocoapods/v/DevPodProblem.svg?style=flat)](http://cocoapods.org/pods/DevPodProblem)
[![License](https://img.shields.io/cocoapods/l/DevPodProblem.svg?style=flat)](http://cocoapods.org/pods/DevPodProblem)
[![Platform](https://img.shields.io/cocoapods/p/DevPodProblem.svg?style=flat)](http://cocoapods.org/pods/DevPodProblem)

## Information

I created this repository to explain an issue with development pod projects in the current (1.0) version of cocoapods.
The problem arises when you use a certain file structure for private and public headers in your development pod.
Basically I added a `Private` and `Public` folder to my `Classes` folder in the template project that is generated
with `pod lib create <name>`. The podspec file was edited accordingly, so everytime `pod install` is run
the `Pods` project is generated with the headers correctly said (to `public` or `project`, which are later the private headers).

Since the tests are part of the Example project (a seperate target in that project file) they can't see the private headers.
Apparently there is an [issue](https://github.com/CocoaPods/CocoaPods/issues/5341) with the derived data not being cleaned up properly so I had a hard time figuring out what
was wrong with the target settings generated by `pod install`. Here are my notes for what it's worth:

	New lib
	checked everything works (tests (deleted non-passing template parts) and example app): ok
	Added some UI elements
	Deleted warning due to wrong framework search path: $(SDKROOT)/Developer/Library/Frameworks
	included info about public heaer locations in podspec (now others are in Private)
	Added classes in Finder, then ran pod install to update pods project
	used classes in Example target (not the tests, just the app):
	check: ok (app runs, tests as well)
	added test files, same style as in template, just added "#import <DevPodProblem/MyPrivateClass.h>" (same for Public)
	deleted derived data
	pod install (to be safe)
	example target runs
	deleted derived data again
	tests: fail for private, work for public class (when commenting out the private tests)
	uncomment private tests again, delete derived data
	example target compiles (not surprising)
	MANUALLY set search paths of test target to "${PODS_ROOT}/../../DevPodProblem/Classes/Private"
	change import to #import "MyPrivateClass.h" in private test class
	NOW IT WORKS! :)

The entire problem wasn't present in past versions of cocoapods as I see it, so I assume that the new structure regarding targets
leads to this issue. Also it's apparently not affecting the mere use of pods, obviously the problem is only relevant for
development pods. I think the generated template should easily allow adding private classes and still have the headers be visible
for the tests.

## Example

To run the example project, clone the repo, and run `pod install` from the Example directory first.

## Requirements

## Installation

DevPodProblem is available through [CocoaPods](http://cocoapods.org). To install
it, simply add the following line to your Podfile:

```ruby
pod "DevPodProblem"
```

## Author

Gero Herkenrath, gero.herkenrath@trustedshops.de

## License

DevPodProblem is available under the MIT license. See the LICENSE file for more info.
